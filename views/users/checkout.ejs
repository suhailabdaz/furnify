<!-- /*
* Bootstrap 5
* Template Name: Furni
* Template Author: Untree.co
* Template URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Untree.co">
  <link rel="shortcut icon" href="favicon.png">

  <meta name="description" content="" />
  <meta name="keywords" content="bootstrap, bootstrap4" />
  <style>
	 .address-list {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .address-item {
            width: 48%; /* Two items in one row with a small gap */
            padding: 10px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }

        .address-details {
            display: none;
            padding-left: 20px;
        }

        .larger-text {
            font-size: 16px; /* Adjust the size as needed */

        }

        
    .category-options {
      display: none;
    }
    .search-bar {
      background-color: #3b5d50;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 35px;
      margin: 0;
      display: flex;
      border: 2px solid #efeeee;
      border-radius: 30px;
      overflow: hidden;
    }

    .search-input {
      border: none;
      padding: 10px;
      width: 800px;
      background-color: #3b5d50;
      color: white;
    }

    .search-button {
      background-color: #3d5d50;
      color: white;
      border: none;
      padding: 10px;
      border-top-right-radius: 20px;
      border-bottom-right-radius: 20px;
      cursor: pointer;
    }
	.key{
		color: #3b5d50;
		font-weight: bold;
	}
  </style>

		<!-- Bootstrap CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
		<link href="css/tiny-slider.css" rel="stylesheet">
		<link href="css/style.css" rel="stylesheet">
		<title>Furni Free Bootstrap 5 Template for Furniture and Interior Design Websites by Untree.co </title>
	</head>

	<body>

		<!-- Start Header/Navigation -->
        <%-include('userpartials/nav')%>
		<!-- Start Hero Section -->
			<div class="hero">
				<div class="container">
					<div class="row justify-content-between">
						<div class="col-lg-5">
							<div class="intro-excerpt">
								<h1>Checkout</h1>
							</div>
						</div>
						<div class="col-lg-7">
							
						</div>
					</div>
				</div>
			</div>
		<!-- End Hero Section -->

		<div class="untree_co-section">
		    <div class="container">
		      <div class="row mb-5">
		        <div class="col-md-12">
		        </div>
		      </div>
		      <div class="row">
		        <div class="col-md-6 mb-5 mb-md-0">
		          <h2 class="h3 mb-3 text-black">Select Address</h2>
		          <div class="p-3 p-lg-5 border bg-white">
		            

					<% if (addresses && addresses.length > 0) { %>
						<div class="address-list">
							<% addresses.forEach(address => { %>
								<div class="address-item">
									<label>
										<!-- Add a data attribute to the radio button to store the address ID -->
                                    <input type="radio" name="selectedAddress" value="<%= address.id %>" class="address-radio" data-address-id="<%= address.id %>">

										<span class="larger-text"><%= address.saveas %></span>
									</label>
									<div class="address-details larger-text">
										<p><span class="key">Full Name: </span><%= address.fullname %></p>
										<p><span class="key">House name/Flat no:</span><%= address.adname %></p>
										<p><span class="key">Street:</span> <%= address.street %></p>
										<p><span class="key">City:</span> <%= address.city %></p>
										<p><span class="key">Pin-Code:</span><%= address.pincode %></p>
										<p><span class="key">State:</span><%= address.state %></p>
										<p><span class="key">Country:</span> <%= address.country %></p>
										<!-- Add other address properties as needed -->
									</div>
								</div>
							<% }); %>
						</div>
					<% } else { %>
						<p>No addresses found.</p>
					<% } %>
				
		        


		            

		          

		           




		            <div class="form-group">
		              <label for="c_ship_different_address" class="text-black" data-bs-toggle="collapse" href="#ship_different_address" role="button" aria-expanded="false" aria-controls="ship_different_address"><input type="checkbox" value="1" id="c_ship_different_address">Add a new Address</label>
		              <div class="collapse" id="ship_different_address">
						<div class="suso container mt-4">
							<div class="edit-profile-form">
							  <h2>Add New Address</h2>
						  
							  <form action="/checkoutreload" id="addressForm" method="post" class="row">
							 
								<!-- Personal details -->
						
								<div class="form-group col-md-6">
									<label for="saveas">Save as</label>
									<input type="text" id="saveas" name="saveas" class="form-control">
								  </div>
								<div class="form-group col-md-6">
								  <label for="fullname">Full Name</label>
								  <input type="text" id="fullname" name="fullname" class="form-control">
								</div>
						  
								<div class="form-group col-md-6">
								  <label for="adname">House Name / Flat No</label>
								  <input type="text" id="adname" name="adname" class="form-control">
								</div>
						  
								<div class="form-group col-md-6">
								  <label for="street">Street</label>
								  <input type="text" id="street" name="street" class="form-control">
								</div>
						  
								<div class="form-group col-md-6">
								  <label for="pincode">Pincode</label>
								  <input type="number" id="pincode" name="pincode" class="form-control">
								</div>
						  
								<div class="form-group col-md-6">
								  <label for="city">City</label>
								  <input type="text" id="city" name="city" class="form-control">
								</div>
						  
								<div class="form-group col-md-6">
								  <label for="state">State</label>
								  <input type="text" id="state" name="state" class="form-control">
								</div>
						  
								<div class="form-group col-md-6">
								  <label for="country">Country</label>
								  <input type="text" id="country" name="country" class="form-control">
								</div>
						  
								<div class="form-group col-md-6">
								  <label for="phone">Phone Number</label>
								  <input type="number" id="phone" name="phone" class="form-control">
								</div>

								<input type="hidden" name="cartId" value="<%= cart._id %>">
						  
								<div class="form-group col-12">
								  <button id="saveChangesButton" type="submit" class="btn btn-primary">Save Changes</button>
								</div>
							  </form>
							</div>
						  </div>

		              </div>
		            </div>

		          </div>
		        </div>
		        <div class="col-md-6">

		          <div class="row mb-5">
		            <div class="col-md-12">
		              <h2 class="h3 mb-3 text-black">Coupon Code</h2>
		              <div class="p-3 p-lg-5 border bg-white">

		                <label for="c_code" class="text-black mb-3">Enter your coupon code if you have one</label>
		                <div class="input-group w-75 couponcode-wrap">
		                  <input type="text" class="form-control me-2" id="c_code" placeholder="Coupon Code" aria-label="Coupon Code" aria-describedby="button-addon2">
		                  <div class="input-group-append">
		                    <button class="btn btn-black btn-sm" type="button" id="button-addon2">Apply</button>
		                  </div>
		                </div>

		              </div>
		            </div>
		          </div>

		          <div class="row mb-5">
		            <div class="col-md-12">
		              <h2 class="h3 mb-3 text-black">Your Order</h2>
		              <div class="p-3 p-lg-5 border bg-white">
		                <table class="table site-block-order-table mb-5">
		                  <thead>
		                    <th>Product</th>
		                    <th>Total</th>
		                  </thead>
		                  <tbody>
                            <% cartItems.forEach(cartItem => { %>
							<tr>
                                <td ><span id="productname"><%= cartItem.productName %></span><strong class="mx-2">x</strong><span id="itemquantity"> <%= cartItem.quantity %></span></td>
                                <td id="itemtotal"><%= cartItem.itemTotal %></td>
                                </tr>
                            <% }); %>
		                    <tr>
		                      <td class="text-black font-weight-bold"><strong>Cart Subtotal</strong></td>
		                      <td class="text-black">$350.00</td>
		                    </tr>
		                    <tr>
		                      <td class="text-black font-weight-bold"><strong>Order Total</strong></td>
		                      <td id="cartotal" class="text-black font-weight-bold"><strong> <%= cart.total %></strong></td>
		                    </tr>
						
		                  </tbody>
		                </table>

		                <form action="/placeOrder" method="post" id="orderForm">
							<label>
							  <input type="radio" name="paymentOption" value="Direct Bank Transfer" id="paymentOption1" onchange="updateHiddenField(this)">
							  Direct Bank Transfer
							</label><br>
						
							<label>
							  <input type="radio" name="paymentOption" value="Cheque Payment" id="paymentOption2" onchange="updateHiddenField(this)">
							  Cheque Payment
							</label><br>
						
							<label>
							  <input type="radio" name="paymentOption" value="Paypal" id="paymentOption3" onchange="updateHiddenField(this)">
							  Paypal
							</label><br>
							
						
							<!-- Hidden input fields for address details -->
							<input type="hidden" name="selectedAddressId" id="selectedAddressId" value="<%= addresses.length > 0 ? addresses[0].id : '' %>">
							<!-- Add other hidden fields for additional address properties as needed -->
							<% cartItems.forEach(cartItem => { %>
							<!-- Hidden input fields for cart item details -->
							<input type="hidden" name="selectedProductIds[]" class="selectedProductIds[]" value="<%= cartItem.productId ? cartItem.productId.toString() : '' %>">

							<input type="hidden" name="selectedProductNames[]" class="selectedProductNames[]" value="<%= cartItem.productName %>">
							<input type="hidden" name="selectedQuantities[]" class="selectedQuantities[]" value="<%= cartItem.quantity %>">
							<input type="hidden" name="selectedCartTotals[]" class="selectedCartTotals[]" value="<%= cartItem.itemTotal %>">
							<!-- Add other hidden fields for additional cart item properties as needed -->
							<% }); %>
							<input type="hidden" name="carttotal" class="carttotal" value="<%= cart.total %>">
							<input type="hidden" name="selectedPaymentOption" id="selectedPaymentOption">
							
							<input type="hidden" name="cartId" value="<%= cart._id %>">
							<div class="form-group">
								<button class="btn btn-black btn-lg py-3 btn-block">Place Order</button>
							</div>
						</form>
		

		              </div>
		            </div>
		          </div>

		        </div>
		      </div>
			
		    </div>
		  </div>

		<!-- Start Footer Section -->
		<%-include('userpartials/footer')%>
		
		<!-- End Footer Section -->	
		<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
		

		<script>
			$(document).ready(function () {
				$('.address-radio').change(function () {
					// Get the selected address ID from the data attribute
					var selectedAddressId = $(this).data('address-id');
					
					// Set the value of the hidden input field
					$('#selectedAddressId').val(selectedAddressId);
		
					// Hide other address details (if needed)
					$('.address-details').slideUp();
					$(this).closest('.address-item').find('.address-details').slideDown();
				});
			});
			function updateHiddenField(selectedRadio) {
      // Set the value of the hidden input to the value of the selected radio button
      document.getElementById('selectedPaymentOption').value = selectedRadio.value;
    }
		</script>
	

   


	

		<script src="js/bootstrap.bundle.min.js"></script>
		<script src="js/tiny-slider.js"></script>
		<script src="js/custom.js"></script>
	</body>

</html>
